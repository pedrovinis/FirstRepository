<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forca</title>
    <script>
        var screen
        var menu
        var stickman
        var word
        var wordresult
        var obj
        var letters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]
        var words=["Academia","Avião","Cozinha","Fazenda","Bolsa","Carro","Praia","Casa","Chave","Calça","Óculos"]
        var gamestatus
        var trys

        var head
        var body
        var arm1
        var arm2
        var leg1
        var leg2

        var sm1
        var sm2
        var sm3
        var sm4

        function load(){
            menu = 0
            addElements()
            interface()
            addEvents()
        }
        addEventListener("load",load)
        
        function addElements(){
            stickman=document.getElementById("stickman")
            screen=document.getElementById("screen")
            menu=document.getElementById("menu")
            sm1=document.getElementById("sm1").innerHTML
            sm2=document.getElementById("sm2").innerHTML
            sm3=document.getElementById("sm3").innerHTML
            sm4=document.getElementById("sm4").innerHTML
        }
        function addEvents(){
            for(i=0; i<26; i++){
                addEvent(i)
            }
            document.getElementById("btStart").addEventListener("click",start)
            document.getElementById("btTip").addEventListener("click",tip)
        }
        function start(){
            console.log("start()")
            interface()
            getWord()
            gamestatus=1
        }
        function tip(){

        }
        function addEvent(letterId){
            obj=document.getElementById(letterId)
            obj.addEventListener("click",function(){
                buttonPress(letterId)
            })
        }
        function buttonPress(id){
            if(gamestatus==1&&trys>=1){
                verifyWord(id)
            }
            if(trys==0){
                alert("Você Perdeu! A palavra era: '" +word+"'\nClique em 'Iniciar' para começar um novo jogo")
                gamestatus=0
            }
        }
        function verifyWord(id){
            wordArray = []
            wordPosition=word.search(letters[id])
            console.log(wordPosition)
            if(wordPosition>=0){
                if(document.getElementById("menu").innerHTML.search(letters[id])<0){
                    document.getElementById("menu").innerHTML += " "+letters[id]

                    wordArray= document.getElementById("word").innerHTML.match(/_ /g)
                    wordArray.splice(wordPosition,1,letters[id]+" ")

                    document.getElementById("word").innerHTML = wordArray
          
                    document.getElementById("word").innerHTML=document.getElementById("word").innerHTML.replace(/,/g," ")
           

                    document.getElementById(id).style.color="green"


            }
          }
            if(wordPosition<0){
                if(document.getElementById("menu").innerHTML.search(letters[id])<0){
                    document.getElementById("menu").innerHTML += " "+letters[id]
                    document.getElementById(id).style.color="red"


                }
            }
        }
        function interface(){
            gamestatus=0
            trys=6
            menu.innerHTML="Letras: "
            document.getElementById("trys").innerHTML="Chances: "+trys
            stickmanActions()
            for(i=0;i<26;i++){
                document.getElementById(i).style.color="black"
            }
        }
        function stickmanActions(){
            
            if(gamestatus==0){
            document.getElementById("sm2").innerHTML="|      "
            document.getElementById("sm3").innerHTML="|       "
            document.getElementById("sm4").innerHTML="|       "
            }
            else if(gamestatus==1){
                switch(trys){
                    case 5:
                        document.getElementById("sm2").innerHTML=sm2
                        break
                    case 4:
                        document.getElementById("sm3").innerHTML=sm3.slice(0,6)
                        break
                    case 3:
                        document.getElementById("sm3").innerHTML=sm3.slice(0,7)
                        break
                    case 2:
                        document.getElementById("sm3").innerHTML=sm3.slice(0,8)
                        break
                    case 1: 
                        document.getElementById("sm4").innerHTML=sm4.slice(0,7)
                        break
                    case 0:
                        document.getElementById("sm4").innerHTML=sm4.slice(0,8)
                        break
                }
            }
        }  

        function getWord(){
            num = parseInt(Math.random()*words.length)
            word = words[num].toUpperCase()
            console.log(word)
            document.getElementById("word").innerHTML=""
            for(cont=0;cont<word.length;cont++){
                console.log(word[cont])
            }
            for(i=0;i<word.length;i++){
                document.getElementById("word").innerHTML+="_ "
            }
        }
        var aaa ="aaaa"
</script>
</head>
<body>
<div id="screen">
    <div id="buttonPress">
        <input type="button" id="btStart" value="Iniciar">
        <input type="button" id="btTip"value="Dica">
        <br>
        <br>
    </div>
    <div id="trys"></div>
    <div id="menu">
     </div>
     <div id="trys"></div>
     
    <pre id="stickman">
____________<div id="sm1">|    |</div><div id="sm2">|     O</div><div id="sm3">|    /|\</div><div id="sm4">|     /\</div>|
    </pre>
    <div id="word">

    </div>

    <div id="letters">
        <input type="button" id="0" value="A">
        <input type="button" id="1" value="B">
        <input type="button" id="2" value="C">
        <input type="button" id="3" value="D">
        <input type="button" id="4" value="E">
        <input type="button" id="5" value="F">
        <input type="button" id="6" value="G">
        <input type="button" id="7" value="H">
        <input type="button" id="8" value="I">
        <input type="button" id="9" value="J">
        <input type="button" id="10" value="K">
        <input type="button" id="11" value="L">
        <input type="button" id="12" value="M">
        <input type="button" id="13" value="N">
        <input type="button" id="14" value="O">
        <input type="button" id="15" value="P">
        <input type="button" id="16" value="Q">
        <input type="button" id="17" value="R">
        <input type="button" id="18" value="S">
        <input type="button" id="19" value="T">
        <input type="button" id="20" value="U">
        <input type="button" id="21" value="V">
        <input type="button" id="22" value="W">
        <input type="button" id="23" value="X">
        <input type="button" id="24" value="Y">
        <input type="button" id="25" value="Z">
    </div>
</div>

</body>
</html>